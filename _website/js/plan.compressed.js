function changeTransportPlan(e){var t=plannerPrices.sedan.p_planner_max_crowd,a=plannerPrices.minivan.p_planner_max_crowd,n=plannerPrices.minibus.p_planner_max_crowd;plannerPrices.bus.p_planner_max_crowd;e>t&&e<=a?($(".TransportValue").html("<text>"+$(".planner-transport[id='tra126']").val()+"</text>"),$(".planner-transport[id='tra126']").prop("checked",!0),$(".mobile-TransporDropDown").val(126)):e>a&&e<=n?($(".TransportValue").html("<text>"+$(".planner-transport[id='tra127']").val()+"</text>"),$(".planner-transport[id='tra127']").prop("checked",!0),$(".mobile-TransporDropDown").val(127)):e>n?($(".TransportValue").html("<text>"+$(".planner-transport[id='tra220']").val()+"</text>"),$(".planner-transport[id='tra220']").prop("checked",!0),$(".mobile-TransporDropDown").val(220)):($(".TransportValue").html("<text>"+$(".planner-transport[id='tra125']").val()+"</text>"),$(".planner-transport[id='tra125']").prop("checked",!0),$(".mobile-TransporDropDown").val(125))}var map="";function initMap(){map=new google.maps.Map(document.getElementById("SidebarSmallMap"),{zoom:6,center:{lat:41.63514628349129,lng:41.62310082006843},mapTypeId:google.maps.MapTypeId.ROADMAP});var e=new google.maps.DirectionsService,t=new google.maps.DirectionsRenderer;$(document).on("change",".guestsN",function(){countAdditionalServices(),t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change","#mobile-guest",function(){var a=$(this).val();$(".input-number").val(a);var n=$(".planner-children").val(),r=$(".planner-childrenunder").val();countAdditionalServices(),$(".planner-transport").prop("checked",!1),changeTransportPlan(parseInt(a)+parseInt(n)+parseInt(r)),t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change","#mobile-child",function(){var a=$(this).val();$(".planner-children").val(a),countAdditionalServices();var n=$(".input-number").val(),r=$("#mobile-underchild").val();$(".planner-transport").prop("checked",!1),changeTransportPlan(parseInt(a)+parseInt(n)+parseInt(r)),t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change","#mobile-underchild",function(){var e=$(this).val();$(".planner-childrenunder").val(e);var t=$(".input-number").val(),a=$("#mobile-child").val();changeTransportPlan(parseInt(e)+parseInt(t)+parseInt(a))}),$(document).on("change",".planner-childrenunder",function(){var a=$(this).val();countAdditionalServices();var n=$(".input-number").val(),r=$(".planner-children").val();$(".planner-transport").prop("checked",!1),changeTransportPlan(parseInt(a)+parseInt(n)+parseInt(r)),t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".input-number",function(){var a=$(this).val();countAdditionalServices();var n=$(".planner-children").val(),r=$(".planner-childrenunder").val();$(".planner-transport").prop("checked",!1),changeTransportPlan(parseInt(a)+parseInt(n)+parseInt(r)),t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".planner-children",function(){countAdditionalServices();var a=$(this).val(),n=$(".input-number").val(),r=$(".planner-childrenunder").val();$(".planner-transport").prop("checked",!1),changeTransportPlan(parseInt(a)+parseInt(n)+parseInt(r)),t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".CheckBoxItem input[type='checkbox']",function(){$(".SidebarDaysList").html(""),$(".SumCount span.gelprice").html("0");var a=$(this).val(),n=$(this).attr("data-map"),r=$(this).attr("data-categories"),i=$(this).attr("data-title"),o=$(this).attr("data-addprice");if($(this).prop("checked")&&""!=n){var p='<input type="hidden" name="plantrip_direction[]" id="plantrip_direction'+a+'" data-map="'+n+'" data-categories="'+r+'" data-addprice="'+o+'" data-title="'+i+'" value="'+a+'" />';$("#plantripform").append(p)}else $("#plantrip_direction"+a).remove();t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".mobile-placesbox .Item input[type='checkbox'] ",function(){$(".SidebarDaysList").html(""),$(".SumCount span.gelprice").html("0");var a=$(this).val(),n=$(this).attr("data-map"),r=$(this).attr("data-categories"),i=$(this).attr("data-addprice"),o=$(this).attr("data-title");if($(this).prop("checked")&&""!=n){var p='<input type="hidden" name="plantrip_direction[]" id="plantrip_direction'+a+'" data-map="'+n+'" data-categories="'+r+'" data-addprice="'+i+'" data-title="'+o+'" value="'+a+'" />';$("#plantripform").append(p)}else $("#plantrip_direction"+a).remove();t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(".LocationDropDown2 input").change(function(){t.setMap(map),t.setOptions({polylineOptions:{strokeColor:"#12693b"},suppressMarkers:!0}),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".planner-hotels",function(){var a=$(this).attr("data-parent"),n=$(this).attr("data-hotelid");$(".planner-hotels").prop("checked",!1),$(".planner-hotels[data-hotelid='"+n+"']").prop("checked",!0),this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".hostelValue").html($li)):$("text:contains("+this.value+")",".hostelValue").remove(),$(this).prop("checked")&&$("#"+a).prop("checked",!0),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".mobile-HotelsDropDown",function(){var a=$(this).attr("data-parent"),n=$(this).val();$(".planner-hotels").prop("checked",!1),$(".planner-hotels[data-hotelid='"+n+"']").prop("checked",!0),this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".hostelValue").html($li)):$("text:contains("+this.value+")",".hostelValue").remove(),$("#"+a).prop("checked",!0),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".mobile-LanguageDropDown",function(){var a=$(this).attr("data-parent"),n=$(this).val();$(".planner-guide").prop("checked",!1),$(".planner-guide[data-guideid='"+n+"']").prop("checked",!0),this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".LangValue").html($li)):$("text:contains("+this.value+")",".LangValue").remove(),$("#"+a).prop("checked",!0),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".mobile-TransporDropDown",function(){var a=$(this).attr("data-parent"),n=$(this).val();$(".planner-transport").prop("checked",!1),$(".planner-transport[id='tra"+n+"']").prop("checked",!0),this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".TransportValue").html($li)):$("text:contains("+this.value+")",".TransportValue").remove(),$("#"+a).prop("checked",!0),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".planner-cuisune",function(){var a=$(this).attr("data-parent");$(".CuisineValue").html(""),$(".planner-cuisune").each(function(){$(this).attr("id");this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".CuisineValue").append($li)):$("text:contains("+this.value+")",".CuisineValue").remove(),$(this).prop("checked")&&$("#"+a).prop("checked",!0)}),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".planner-guide",function(){var a=$(this).attr("data-parent"),n=$(this).attr("data-guideid");$(".planner-guide").prop("checked",!1),$(".planner-guide[data-guideid='"+n+"']").prop("checked",!0),this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".LangValue").html($li)):$("text:contains("+this.value+")",".LangValue").remove(),$(this).prop("checked")&&$("#"+a).prop("checked",!0),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("change",".planner-transport",function(){$(this).attr("data-parent");var a=$(this).attr("id");$(".planner-transport").prop("checked",!1),$(".planner-transport[id='"+a+"']").prop("checked",!0),this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".TransportValue").html($li)):$("text:contains("+this.value+")",".TransportValue").remove(),countAdditionalServices(),setTimeout(function(){updateDirections(google,e,t)},500)}),$(document).on("click",".g-plan-hotels",function(){return $(".g-plan-dropdown-toggle2").removeClass("open"),$(".g-plan-dropdown-toggle3").removeClass("open"),$(".g-plan-dropdown-toggle4").removeClass("open"),$(".TripCheckbox",this).prop("checked")?($(".planner-hotels").prop("checked",!1),$(".hostelValue").html(""),$(".TripCheckbox",this).prop("checked",!1),$(".mobile-HotelsDropDown").val(""),countAdditionalServices()):$(".g-plan-dropdown-toggle").toggleClass("open"),setTimeout(function(){updateDirections(google,e,t)},500),!1}),$(document).on("click",".g-plan-cuisune",function(){return $(".g-plan-dropdown-toggle").removeClass("open"),$(".g-plan-dropdown-toggle3").removeClass("open"),$(".g-plan-dropdown-toggle4").removeClass("open"),$(".TripCheckbox",this).prop("checked")?($(".planner-cuisune").prop("checked",!1),$(".CuisineValue").html(""),$(".TripCheckbox",this).prop("checked",!1),countAdditionalServices()):$(".g-plan-dropdown-toggle2").toggleClass("open"),setTimeout(function(){updateDirections(google,e,t)},500),!1}),$(document).on("click",".g-plan-guide",function(){return $(".g-plan-dropdown-toggle").removeClass("open"),$(".g-plan-dropdown-toggle2").removeClass("open"),$(".g-plan-dropdown-toggle4").removeClass("open"),$(".TripCheckbox",this).prop("checked")?($(".planner-guide").prop("checked",!1),$(".LangValue").html(""),$(".TripCheckbox",this).prop("checked",!1),$(".mobile-LanguageDropDown").val(""),countAdditionalServices()):$(".g-plan-dropdown-toggle3").toggleClass("open"),setTimeout(function(){updateDirections(google,e,t)},500),!1}),$(document).on("click",".g-plan-transport",function(){return $(".g-plan-dropdown-toggle").removeClass("open"),$(".g-plan-dropdown-toggle2").removeClass("open"),$(".g-plan-dropdown-toggle3").removeClass("open"),$(".g-plan-dropdown-toggle4").toggleClass("open"),!1})}function updateDirections(e,t,a){$(".TripCheckbox").attr("disabled","disabled"),$(".theAllDatepicker").attr("disabled","disabled"),$(".input-number").attr("disabled","disabled"),$(".planner-childrenunder").attr("disabled","disabled"),$(".planner-children").attr("disabled","disabled"),$(".input-group-btn button").attr("disabled","disabled"),$(".SidebarDaysList").html('<img src="/_website/img/ajax-loader.gif" width="20" align="center" style="margin:10px auto;" alt="loader">'),$(".SumCount span.gelprice").html('<img src="/_website/img/ajax-loader.gif" width="20" align="center" style="margin:10px auto;" alt="loader">');var n=void 0!==$("#plantripform input[name='hotels[]']").attr("data-price")?parseInt($("#plantripform input[name='hotels[]']").attr("data-price")):0,r=0;$("#plantripform input[name='cuisune[]']").each(function(){$(this).val();let e=parseInt($(this).attr("data-price"));r+=parseInt(e)});var i=void 0!==$("#plantripform input[name='guide[]']").attr("data-price")?parseInt($("#plantripform input[name='guide[]']").attr("data-price")):0,o=parseInt($("#quant2").val()),p=parseInt($(".planner-children").val()),l=parseInt($(".planner-childrenunder").val()),s=parseInt(n+r+i),c=0,d=[],u=[];$("#plantripform input").each(function(){if(void 0!==$(this).attr("data-map")){var t=$(this).attr("data-addprice"),a=$(this).attr("data-map").split(":"),n=$(this).attr("data-categories"),r=$(this).attr("data-title"),i=$(this).val();d.push({location:new e.maps.LatLng(a[0],a[1]),stopover:!0}),u.push({typeID:n,title:r,idx:i,addprice:t})}});var h=$(".LocationDropDown2 .TripCheckbox:checked").attr("data-map_coordinates").split(":"),g=new e.maps.LatLng(h[0],h[1]),m=void 0!==d[d.length-1]?d[d.length-1].location:"";if(d.pop(),""==m)return a.setMap(null),$(".TripCheckbox").attr("disabled",!1),$(".theAllDatepicker").attr("disabled",!1),$(".input-number").attr("disabled",!1),$(".planner-childrenunder").attr("disabled",!1),$(".planner-children").attr("disabled",!1),$(".input-group-btn button").attr("disabled",!1),!1;var v={origin:g,destination:m,travelMode:"DRIVING",waypoints:d,optimizeWaypoints:!0},k=parseFloat($("#g-cur-exchange-usd").val()),b=parseFloat($("#g-cur-exchange-eur").val());t.route(v,function(t,n){if(n!=e.maps.DirectionsStatus.OK)$("#SidebarSmallMap").html("Status: "+n);else if(n==e.maps.DirectionsStatus.OK){a.setDirections(t);var r=0,i=0,d=1,h=0,g=0;$(".SidebarDaysList").html(""),$(".SumCount span.gelprice").text(0);for(var m=0;m<=t.routes[0].legs.length-1;m++)h+=parseFloat(t.routes[0].legs[m].distance.value);h/=1e3,$("#totalkm").val(h);var v=$("meta[name=CSRF_token]").attr("value");$.ajax({type:"POST",url:"https://tripplanner.ge/en/?ajax=true",data:{type:"mapdir",tk:"*(78..Ui"+h+"[^%$54512251*76]",xk:n,dv:123*parseFloat(t.routes[0].legs[0].distance.value),token:v}}).done(function(e){});parseInt($("#tra125").attr("data-kmlimit")),parseInt($("#tra126").attr("data-kmlimit")),parseInt($("#tra127").attr("data-kmlimit"));var x=0,f=new Array;for(m=0;m<=t.routes[0].legs.length-1;m++){var D=parseFloat(t.routes[0].legs[m].distance.value);i+=t.routes[0].legs[m].duration.value/60/60*2+1,r=parseFloat(D/1e3),x=parseInt(o)+parseInt(p)+parseInt(l);var _=plannerPrices.sedan;if($("#tra125").prop("checked")?_=plannerPrices.sedan:$("#tra126").prop("checked")?_=plannerPrices.minivan:$("#tra127").prop("checked")?_=plannerPrices.minibus:$("#tra220").prop("checked")&&(_=plannerPrices.bus),h<50?g=_.p_planner_0_50:h>=50&&h<100?g=_.p_planner_50_100:h>=100&&h<150?g=_.p_planner_100_150:h>=150&&h<200?g=_.p_planner_150_200:h>=200&&h<250?g=_.p_planner_200_250:h>=250&&h<300?g=_.p_planner_250_300:h>=300&&h<350?g=_.p_planner_300_350:h>=350&&h<400?g=_.p_planner_350_400:h>=400&&(g=_.p_planner_400_plus),x>_.p_planner_max_crowd){let e=Math.ceil(x/_.p_planner_max_crowd);g=parseFloat(g*e)}var T=parseFloat(r*g);d=Math.ceil(i/14)<=1?1:Math.ceil(i/14);let e=parseInt(d)-1;var w=$("#startDatePicker").val(),I=$("#mobile-startdate").val();let a=new Date(w),n=new Date(I),s=864e5*e,c=a.getTime()+s,v=n.getTime()+s;var C=new Date((new Date).setTime(c)),y=new Date((new Date).setTime(v));$(".theAllDatepicker2").val(C.yyyymmdd()),$("#mobile-enddate").val(y.yyyymmdd()),$("#needday").val(e);var S={};S["day"+d]={idx:u[m].idx,title:u[m].title,addprice:u[m].addprice,price:T,day:d},f.push(S)}for(var A="",M=0;M<parseInt(d);M++){A+='<div class="Item'+(0==M?" active":"")+'">',A+='<div class="Day"><span>'+(M+1)+"</span>"+VAR_DAY+"</div>";for(var V=0;V<=f.length;V++)if(void 0!==f[V]&&void 0!==f[V]["day"+(M+1)]){var L=f[V]["day"+(M+1)],F=parseInt(f[V]["day"+(M+1)].addprice),O=0;O+=F*o,O+=F/2*p;var P=parseFloat(L.price)+parseFloat(O),B="<i>A</i>",R=(P+=P*parseFloat(_.income_proc)/100).toFixed(0)+B;"usd"==$("#g-cur__").val()?R=(P/k).toFixed(0)+"$":"eur"==$("#g-cur__").val()&&(R=(P/b).toFixed(0)+"&euro;"),A+="<li><label>"+L.title+'</label><span data-gelprice="'+P.toFixed(0)+'">'+R+'</span><em data-id="'+L.idx+'">x</em></li>',c+=parseFloat(L.price),c+=parseFloat(O)}A+="</div>"}$(".SidebarDaysList").html(A)}$("#plantripform #plannedDay").remove(),$("#plantripform").append("<input type='hidden' id='plannedDay' value='"+parseInt(d)+"' />");var j=parseFloat(c+s*parseInt(d)),N=(B="<i>A</i>",(j+=j*parseFloat(_.income_proc)/100).toFixed(0)+B);return"usd"==$("#g-cur__").val()?N=(j/k).toFixed(0)+"$":"eur"==$("#g-cur__").val()&&(N=(j/b).toFixed(0)+"&euro;"),countAdditionalServices(),$(".SumCount span.gelprice").html(N),$(".SumCount span.gelprice").attr("data-gelprice",j),$(".TripCheckbox").attr("disabled",!1),$(".theAllDatepicker").attr("disabled",!1),$(".input-number").attr("disabled",!1),$(".planner-childrenunder").attr("disabled",!1),$(".planner-children").attr("disabled",!1),$(".input-group-btn button").attr("disabled",!1),!0})}function gShowAllText(e){var t=$("#"+e).attr("data-fulltext");$("#"+e).html(t),$("."+e).hide()}$(document).on("click",".SidebarDaysList .Item li em",function(){var e=$(this).attr("data-id");navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?$(".CheckboxListsForMobile input[value='"+e+"']").click():$(".CheckBoxItem input[id='"+e+"']").click()}),$("#mobile-regions").change(function(){updateDataMobile()}),$(document).on("click",".g-hovertext",function(){$(this).css("z-index","1")}),$("#mobile-place").change(function(){var e=$(this).val();$(".LocationDropDown2 .Item #List"+e).trigger("click")}),$(".LocationDropDown1 input").change(function(){this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".InpueValue1").append($li)):$("text:contains("+this.value+")",".InpueValue1").remove(),updateData()}),$(".LocationDropDown2 input").change(function(){$(".InpueValue2 text").remove(),$(".LocationDropDown2 input").prop("checked",!1),this.checked=!0,this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".InpueValue2").append($li)):$("text:contains("+this.value+")",".InpueValue2").remove()}),$(".cuisune-mobile-checkbox").change(function(){var e=parseInt($(this).attr("data-cuisuneid")),t=!1;$(this).prop("checked")?$("#Cuisine"+e).prop("checked",!0):$("#Cuisine"+e).prop("checked",!1),$("#Cuisine"+e).trigger("change"),$(".cuisune-mobile-checkbox").each(function(){$(this).prop("checked")&&(t=!0)}),$("#Cuisine").prop("checked",t)}),$(".guestsN-mobile").change(function(){var e=parseInt($(this).attr("data-id")),t=$(this).val();$(".guestsN[data-id='"+e+"']").val(t),$("#Cuisine"+e).trigger("change")}),$(".TransporDropDown input").change(function(){this.checked?($li=$(" <text> </text> "),$li.text(this.value),$(".TransportValue").append($li)):$("text:contains("+this.value+")",".TransportValue").remove()});